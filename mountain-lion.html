<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="http://martinbrochhaus.com/theme/css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="http://martinbrochhaus.com/theme/css/bootstrap-responsive.css" rel="stylesheet" media="screen">
    <link href="http://martinbrochhaus.com/theme/css/styles.css" rel="stylesheet" media="screen">

    <link href='http://fonts.googleapis.com/css?family=Bitter:400,700' rel='stylesheet' type='text/css' >
    <link href='http://fonts.googleapis.com/css?family=Cantora+One' rel='stylesheet' type='text/css'>
</head>
<body>
    <div class="miniBio">
        <div class="container">
            <a class="brand" href="./index.html" title="martinbrochhaus.com"><img src="http://martinbrochhaus.com/theme/img/avatar.jpg" /></a>
            <span class="miniBioText">I build software with Python & Django. Every day. All day long.</span>
        </div>
    </div>

    <div class="container">
        <div class="container">
    <div class="row">
        <div class="span12 articleDetailHeadline">
            <h1>Fixing Mountain Lion</h1>
            <h2>Fixing OSX 10.8 after Mountain Lion upgrade</h2>
        </div>
    </div>
</div>

<div class="container">
    <div class="row articleDetail">
        <div class="span3 articleInfo light">
            <p><i class="icon-calendar"></i>&nbsp;Thu 26 July 2012</p>
    <p class="articleTags">
        <i class="icon-tag"></i>&nbsp;tags:
                    <a href="http://martinbrochhaus.com/tag/apple.html">apple</a>
                    <a href="http://martinbrochhaus.com/tag/osx.html">osx</a>
            </p>
        </div>
        <div class="span6 articleDetailContent">
            <p>Out of habit I opened the AppStore on my MacBook Pro yesterday and found a big
fat new app in the spotlight: OSX 10.8 Mountain Lion. I paid my 15 bucks,
downloaded the 4GB over night and started the installation this morning. It
estimated 34 minutes to install but I don't know if that is true because I went
back to sleep.</p>
<p>When I got up, the Mountain Lion login screen greeted me. If this is not an
awesome upgrade experience, I don't know what is. 15 EUR and three clicks,
other than that totally unattended update. I cannot see any way how Microsoft
and Windows will survive the next decade.</p>
<p>I guess from a user point of view this is the best experience possible. For us
developers it doesn't look that good, but that is to be expected and the same
happens on Ubuntu as well, so I won't complain here.</p>
<p>Here is what I had to do to get my Python projects back up and running:</p>
<h2>Re-Install Command Line Tools</h2>
<p>With the Mountain Lion upgrade I also upgraded a few other apps, such as XCode.
Unfortunately it seems that the Command Line Tools I had installed are no
longer working, so the natural thing to do is, login to the Apple Developer
site and download the latest version. Turns out that version is not compatible
with OSX 10.8. <strong>What the fuck?</strong></p>
<p>Some googling revealed that you can install these tools now via XCode by going
to <code>Preferences --&gt; Downloads</code>. I clicked at the <code>Install</code> button next to
<code>Command Line Tools</code> and had to enter my Apple Developer ID and password.
After a few seconds XCode tells me that I don't have access to that download
and that I should contact Apple to resolve access problems. Turns out this is
a bug in XCode that has been fixed for some but not for others. I'm seem to be
one of the others. <strong>What the fuck?</strong></p>
<p>Some more googling revealed that you can download a special, older version
of the Command Line Tools and install it from the <code>.dmg</code> file. This works
although that version's description is exactly the same, I don't see why the
latest version does not work. <strong>What the fuck?</strong></p>
<p>Anyways, the link is here: <a href="http://adcdownload.apple.com/ios/ios_simulator__resigned/cltools_mountainliondp2_march12.dmg">cltools_mountainliondp2_march12.dmg</a></p>
<h2>Re-Install Parallels</h2>
<p>I should have started Parallels before upgrading to Mountain Lion, then it
would have upgraded itself. Instead after logging in to Mountain Lion it
told me that it found incompatible software which it moved to some graveyard
folder. No more Parallels for me. Thankfully I could login at the Parallels
website and retrieve a download link for the latest version <a href="http://www.parallels.com/download/build/desktop/">here</a></p>
<h2>Update zsh</h2>
<p>Something in my zsh seemed to be broken because whenever I tried to use TAB
for folder completion I got this error:</p>
<div class="highlight"><pre><span class="p">(</span><span class="n">eval</span><span class="p">):</span><span class="n">setopt</span><span class="p">:</span>3<span class="p">:</span> <span class="n">no</span> <span class="n">such</span> <span class="n">option</span><span class="p">:</span> <span class="n">NO_ignoreclosebraces</span>
</pre></div>


<p>Updating zsh can only be done if you went through the various what-the-fucks of
updating your Command Line Tools first, after that it simply is:</p>
<div class="highlight"><pre><span class="n">brew</span> <span class="n">update</span>
<span class="n">brew</span> <span class="n">uninstall</span> <span class="n">zsh</span>
<span class="n">brew</span> <span class="n">install</span> <span class="n">zsh</span>
</pre></div>


<p>And fixed my problem right away.</p>
<h2>Re-Install Python</h2>
<p>I actually did this at the end of my journey because it turned out that even
though I updated virtualenv and virtualenvwrapper I was not able to install
anything into my virtualenvs because pip always tried to install it into
<code>/Library/Python/2.7/site-packages/</code> which of course resulted in <code>Permission
denied</code> errors. <code>brew list</code> showed that I actually installed Python via
homebrew for some reason (I assume because of pygame), so I thought it might
be a good idea to re-install Python:</p>
<div class="highlight"><pre><span class="n">brew</span> <span class="n">uninstall</span> <span class="n">python</span>
<span class="n">brew</span> <span class="n">install</span> <span class="n">python</span> <span class="o">--</span><span class="n">framework</span>
</pre></div>


<p>After this I ran into several other problems. I'm not sure if this is really
necessary but setting up my <code>PATH</code> like this seemed to help:</p>
<div class="highlight"><pre><span class="n">export</span> <span class="n">PATH</span><span class="p">=</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">bin</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">sbin</span><span class="p">:</span><span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">python</span><span class="p">:</span>$<span class="n">PATH</span>
# <span class="n">Include</span> <span class="n">user</span><span class="o">&#39;</span><span class="n">s</span> <span class="n">bin</span> <span class="n">folder</span><span class="p">.</span>
<span class="k">if</span> <span class="p">[</span> <span class="o">-</span><span class="n">d</span> &quot;$<span class="n">HOME</span><span class="o">/</span><span class="n">bin</span>&quot; <span class="p">]</span> <span class="p">;</span> <span class="n">then</span>
    <span class="n">export</span> <span class="n">PATH</span><span class="p">=</span>&quot;$<span class="n">HOME</span><span class="o">/</span><span class="n">bin</span><span class="p">:</span>$<span class="n">PATH</span>&quot;
<span class="n">fi</span>
</pre></div>


<h2>Re-Install Python stuff</h2>
<p>It turned out that I could no longer activate my virtualenvs. Here is what I
had to do:</p>
<div class="highlight"><pre><span class="n">sudo</span> <span class="n">easy_install</span> <span class="n">pip</span>
<span class="n">sudo</span> <span class="n">easy_install</span> <span class="n">mercurial</span>
<span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">virtualenv</span>
<span class="n">sduo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">virtualenvwrapper</span>
<span class="n">sudo</span> <span class="n">touch</span> <span class="o">/</span><span class="n">System</span><span class="o">/</span><span class="n">Library</span><span class="o">/</span><span class="n">Frameworks</span><span class="o">/</span><span class="n">Python</span><span class="p">.</span><span class="n">framework</span><span class="o">/</span><span class="n">Versions</span><span class="o">/</span>2<span class="p">.</span>7<span class="o">/</span><span class="n">lib</span><span class="o">/</span><span class="n">python2</span><span class="p">.</span>7<span class="o">/</span><span class="n">distutils</span><span class="o">/</span><span class="n">__init__</span><span class="p">.</span><span class="n">py</span>
</pre></div>


<p>The last one is wonderful. Somehow Apple ships the Python stuff as compiled
<code>.pyc</code> files without the <code>.py</code> files. I can't remember if it was when I
tried to use <code>pip install</code> or <code>workon</code> but I got that error telling me
that <code>/distutils/__init__.py</code> cannot be found. Google told me that I can
just create that missing <code>.py</code> file. <strong>What the fuck?</strong></p>
<p>I also re-installed some packages that I like to install globally instead of
installing them into each and every virtualenv:</p>
<div class="highlight"><pre><span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">psycopg2</span>
<span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">mysql</span><span class="o">-</span><span class="n">python</span>
<span class="n">sudo</span> <span class="n">pip</span> <span class="n">install</span> <span class="n">PIL</span>
</pre></div>


<h2>Re-Install Java</h2>
<p>When I tried to start solr a pop-up offered to download the latest Java version.</p>
<h2>Set iTerm to xterm-256color</h2>
<p>You might have a problem when running Vim inside of GNU Screen or tmux. It
might no longer show the correct color theme. This is because iTerm forgot it's
setting for <code>Report Terminal Type</code>, which you can set at <code>Preferences --&gt;
Profiles --&gt; Default</code>. Set it back to <code>xterm-256color</code>.</p>
<h2>That's it</h2>
<p>This whole thing took me exactly 4 hours including the writing of this blog
post. It also took so long because I had to reinstall a huge virtualenv over
and over again until it finally worked without errors. Not too bad actually and
I found it quite amazing that MySQL and Postgres still worked.</p>
        </div>
    </div>
</div>

<div class="container">
    <div class="row comments">
        <div class="span3">&nbsp;</div>
        <div class="span6">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'martinbrochhauscom'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
</div>
    </div>

    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="span6">
                    <p><strong>Martin Brochhaus</strong> is the founder of <a href="http://bitmazk.com">Bitmazk Pte. Ltd.</a>. He is doing web development since 1998 and currently he is in love with Python & Django. Almost all of his work can be found on <a href="https://github.com/bitmazk">Github</a>. When he is not writing code, he gives <a href="https://speakerdeck.com/mbrochh">talks</a> or helps organizing <a href="https://pycon.sg">conferences</a>.</p>
                </div>
                <div class="span4">
                                            <p><strong>Say hi!</strong></p>
                        <ul class="socialLinks">
                                                            <li><a href="https://github.com/mbrochh"><span class="symbol">&#xe037;</span> Github</a></li>
                                                            <li><a href="https://plus.google.com/101162916953876296847/about"><span class="symbol">&#xe039;</span> Google Plus</a></li>
                                                            <li><a href="https://twitter.com/mbrochh"><span class="symbol">&#xe086;</span> Twitter</a></li>
                                                            <li><a href="https://facebook.com/mbrochh"><span class="symbol">&#xe027;</span> Facebook</a></li>
                                                    </ul>
                                    </div>
            </div>
        </div>
    </div>

    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="http://martinbrochhaus.com/theme/js/bootstrap.min.js"></script>
        <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1147761-33']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>