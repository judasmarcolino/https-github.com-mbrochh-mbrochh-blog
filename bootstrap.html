<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="http://martinbrochhaus.com/theme/css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="http://martinbrochhaus.com/theme/css/bootstrap-responsive.css" rel="stylesheet" media="screen">
    <link href="http://martinbrochhaus.com/theme/css/github.css" rel="stylesheet" media="screen">
    <link href="http://martinbrochhaus.com/theme/css/github-numbers.css" rel="stylesheet" media="screen">
    <link href="http://martinbrochhaus.com/theme/css/styles.css" rel="stylesheet" media="screen">

    <link href='http://fonts.googleapis.com/css?family=Bitter:400,700' rel='stylesheet' type='text/css' >
    <link href='http://fonts.googleapis.com/css?family=Cantora+One' rel='stylesheet' type='text/css'>
</head>
<body>
    <div class="miniBio">
        <div class="container">
            <a class="brand" href="./index.html" title="martinbrochhaus.com"><img src="http://martinbrochhaus.com/theme/img/avatar.jpg" /></a>
            <span class="miniBioText">I build software with Python & Django. Every day. All day long.</span>
        </div>
    </div>

    <div class="container">
        <div class="container">
    <div class="row">
        <div class="span12 articleDetailHeadline">
            <h1>Manage Twitter Bootstrap</h1>
            <h2>How to Manage Twitter Bootstrap. The Sane Way.</h2>
        </div>
    </div>
</div>

<div class="container">
    <div class="row articleDetail">
        <div class="span3 articleInfo light">
            <p><i class="icon-calendar"></i>&nbsp;Thu 17 January 2013</p>
    <p class="articleTags">
        <i class="icon-tag"></i>&nbsp;tags:
                    <a href="http://martinbrochhaus.com/tag/css.html">css</a>
                    <a href="http://martinbrochhaus.com/tag/bootstrap.html">bootstrap</a>
                    <a href="http://martinbrochhaus.com/tag/howto.html">howto</a>
            </p>
        </div>
        <div class="span6 articleDetailContent">
            <p>Without any doubt, <a href="http://twitter.github.com/bootstrap/">Twitter's Bootstrap</a>
is awesome. So far I am using it in more than 10 projects and I don't regret
anything.</p>
<p>Unfortunately, Bootstrap has one major flaw: You can't really add it to your
project and manipulate it, without editing the source files. Bootstrap offers
a download page where you can chose the parts that you want and where you can
enter values for all the variables - but I don't know who on earth works like
this. I usually don't know about exact color values for my project until
shortly before go-live and I certainly don't want to come back to the download
page and download new versions of bootstrap over and over again.</p>
<p>Here is what I want:</p>
<ul>
<li>I want to add Bootstrap to my project and work with the latest files from
  the github repo</li>
<li>Yet I don't want to manipulate them, because</li>
<li>I want to be able to update my bootstrap sources at any time without merge
  conflicts</li>
<li>Updating should be a no-brainer</li>
</ul>
<p>My solution might not be the most elegant, but so far it seems to get the job
done:</p>
<h2>Add Bootstrap as a submodule</h2>
<p>First I add bootstrap as a git submodule to my Django projects:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>git submodule add git://github.com/twitter/bootstrap.git myproject/submodules/bootstrap
</pre></div>
</td></tr></table>

<p>It is important to add the submodule to a path inside your project root. This
way you can place symlinks easily with all relative paths.</p>
<h2>Setup your css folder</h2>
<p>Surely you will have a folder that holds your project's CSS files somewhere in
your project. For my Django projects that is usually:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>myproject/myproject/static/css/
</pre></div>
</td></tr></table>

<p>Inside of this folder I like to create a <code>libs</code> folder which holds CSS files
of third party plugins or frameworks that I use. In our case this would be
bootstrap, so let's create a bootstrap folder:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>mkdir myproject/myproject/static/css/libs/bootstrap/
</pre></div>
</td></tr></table>

<h2>Symlink the bootstrap files</h2>
<p>So here is the first part of the trick. Inside of the <code>bootstrap</code> which we have
just created, we symlink all the <code>.less</code> files of the Bootstrap framework:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">cd </span>myproject/myproject/static/css/libs/bootstrap/
ln -s ../../../../../submodules/bootstrap/less/* .
</pre></div>
</td></tr></table>

<p>It would be better to just symlink the whole <code>less</code> folder instead of all files
but unfortunately <code>lessc</code> is not able to follow such symlinks and would fail
to compile the <code>bootstrap.less</code> file.</p>
<h2>Prepare the working files</h2>
<p>Here comes the second part of the trick. We will create copies of the files
<code>bootstrap.less</code> and <code>responsive.less</code>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span class="nb">cd </span>myproject/myproject/static/css/
cp libs/bootstrap/bootstrap.less .
cp libs/bootstrap/responsive.less .
touch my-variables.less
touch styles.less
</pre></div>
</td></tr></table>

<p>I know, I know, we have just symlinked them, why create another copy now? The
reason is that we won't use the symlinks (you could delete them). Instead
we will make a three simple changes to those two files. First we need to change
the paths to all the imported <code>.less</code> files:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre>sed -i -e <span class="s1">&#39;s/import &quot;/import &quot;libs\/bootstrap\//g&#39;</span> bootstrap.less
sed -i -e <span class="s1">&#39;s/import &quot;/import &quot;libs\/bootstrap\//g&#39;</span> responsive.less
</pre></div>
</td></tr></table>

<p>Next we will add an import of our own variables file to both files. The import
should come right after the import of the original <code>variables.less</code>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp"># Excerpt from your bootstrap.less copy:</span>

<span class="p">...</span>
<span class="c1">// CSS Reset</span>
<span class="cp">@import</span> <span class="s2">&quot;libs/bootstrap/reset.less&quot;</span><span class="p">;</span>

<span class="c1">// Core variables and mixins</span>
<span class="cp">@import</span> <span class="s2">&quot;libs/bootstrap/variables.less&quot;</span><span class="p">;</span>

<span class="cp">@import</span> <span class="s2">&quot;my-variables.less&quot;</span><span class="p">;</span> <span class="c1">// Our own variables overrides</span>

<span class="cp">@import</span> <span class="s2">&quot;libs/bootstrap/mixins.less&quot;</span><span class="p">;</span>
<span class="p">...</span>
</pre></div>
</td></tr></table>

<p>Finally we will include our very own <code>styles.less</code> at the bottom of
<code>bootstrap.less</code>. Styles in this file would override everything else from
bootstrap:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="cp"># Excerpt from your bootstrap.less copy:</span>

<span class="p">...</span>
<span class="c1">// Utility classes</span>
<span class="cp">@import</span> <span class="s2">&quot;libs/bootstrap/utilities.less&quot;</span><span class="p">;</span> <span class="c1">// Has to be last to override when necessary</span>

<span class="c1">// Our own stuff</span>
<span class="cp">@import</span> <span class="s2">&quot;styles.less&quot;</span><span class="p">;</span>
</pre></div>
</td></tr></table>

<p>Repeat the last two steps for <code>responsive.less</code> as well, of course here you
would add an import to <code>styles-responsive.less</code> instead of <code>styles.less</code> at the 
bottom.</p>
<h2>How to work with this setup?</h2>
<p>That's a whole lot of files to deal with, but the rules are actually quite
simple:</p>
<ul>
<li>Never touch anything in the <code>/libs/bootstrap/</code> folder</li>
<li>If you would like to change the value of any of Bootstrap's
  <a href="https://github.com/twitter/bootstrap/blob/master/less/variables.less">variables</a>,
  override that same variable in our <code>my-varibales.less</code> file.</li>
<li>You can even invent new variables here.</li>
<li>Whenever you would like to add project specific styles for your site, add
  them to <code>styles.less</code> and <code>responsive-styles.less</code>.</li>
</ul>
<p>When you are done, compile the files <code>bootstrap.less</code> and <code>responsive.less</code>. I
like to save the output as <code>bootstrap.css</code> and <code>bootstrap-responsive.css</code> and
those two files are the ones that I link in my templates.</p>
<h2>Why is this awesome?</h2>
<p>First of all, you will have your project specific overrides included in the
rest of the Bootstrap framework and don't need to link it in your templates.
This saves you one request.</p>
<p>Secondly, we are symlinking to a git submodule, so if a new version or even
just a minor bugfix is released, we can just <code>cd</code> into the
<code>submodules/bootstrap</code> folder and run <code>git pull</code>. After that we need to
re-compile our files and that's it - we just updated our Bootstrap files.</p>
<h2>What can go wrong?</h2>
<p>There is one thing that can and will still go wrong: The two file that we have
modified and copied (<code>bootstrap.less</code> and <code>responsive.less</code>) might differ
when you pull the latest Bootstrap version. Especially when a major new release
happened, there will most definitely be new imports in those files. Luckily
those files are really simple, so you can probably spot the new import at a
glance. A new import would also mean that there is a new file that should be
symlinked.</p>
<p>So in this case, the best workflow would be this:</p>
<ul>
<li>Delete all symlinks and re-create them</li>
<li>Copy <code>bootstrap.less</code> and <code>responsive.less</code> again</li>
<li>Run the <code>sed</code> commands again</li>
<li>Add the imports to <code>my-variables.less</code> and <code>styles.less</code> again.</li>
</ul>
<p>You could even create a shell script for this task, therefore I consider it
a no-brainer :)</p>
<h2>tl;dr</h2>
<p>We want to use bootstrap as a git submodule because then we can update it
simply via <code>git pull</code>.</p>
<p>We can't really touch any of the sourcefiles because that would result in merge
conflicts when we pull a new version, but the <code>variables.less</code> file is full of
gold and really needs to be changed.</p>
<p>As a solution, we just create our own <code>my-variables.less</code> file and import it
in copies of <code>bootstrap.less</code> and <code>responsive.less</code> - those files are just as
likely to change but if they do, we can re-create them in no time.</p>
        </div>
    </div>
</div>

<div class="container">
    <div class="row comments">
        <div class="span3">&nbsp;</div>
        <div class="span6">
            <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'martinbrochhauscom'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </div>
</div>
    </div>

    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="span6">
                    <p><strong>Martin Brochhaus</strong> is the founder of <a href="http://bitmazk.com">Bitmazk Pte. Ltd.</a>. He is doing web development since 1998 and currently he is in love with Python & Django. Almost all of his work can be found on <a href="https://github.com/bitmazk">Github</a>. When he is not writing code, he gives <a href="https://speakerdeck.com/mbrochh">talks</a> or helps organizing <a href="https://pycon.sg">conferences</a>.</p>
                </div>
                <div class="span4">
                                            <p><strong>Say hi!</strong></p>
                        <ul class="socialLinks">
                                                            <li><a href="https://github.com/mbrochh"><span class="symbol">&#xe037;</span> Github</a></li>
                                                            <li><a href="https://plus.google.com/101162916953876296847/about"><span class="symbol">&#xe039;</span> Google Plus</a></li>
                                                            <li><a href="https://twitter.com/mbrochh"><span class="symbol">&#xe086;</span> Twitter</a></li>
                                                            <li><a href="https://facebook.com/mbrochh"><span class="symbol">&#xe027;</span> Facebook</a></li>
                                                            <li><a href="https://foursquare.com/mbrochh"><span class="symbol">&#xe032;</span> Foursquare</a></li>
                                                            <li><a href="http://www.linkedin.com/in/mbrochh"><span class="symbol">&#xe052;</span> LinkedIN</a></li>
                                                            <li><a href="https://secure.flickr.com/photos/mbrochh/"><span class="symbol">&#xe029;</span> Flickr</a></li>
                                                    </ul>
                                    </div>
            </div>
        </div>
    </div>

    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="http://martinbrochhaus.com/theme/js/bootstrap.min.js"></script>
        <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1147761-33']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>