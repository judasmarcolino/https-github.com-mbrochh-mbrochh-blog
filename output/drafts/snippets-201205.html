<!DOCTYPE html>
<html lang="en">
<head>
        <title>Snippets of Mai 2012</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link href="../" type="application/atom+xml" rel="alternate" title="martinbrochhaus.com ATOM Feed" />
        

        <!--[if IE]>
                <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

        <!--[if lte IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie.css"/>
                <script src="../js/IE8.js" type="text/javascript"></script><![endif]-->

        <!--[if lt IE 7]>
                <link rel="stylesheet" type="text/css" media="all" href="../css/ie6.css"/><![endif]-->

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../index.html">martinbrochhaus.com </a></h1>
                <nav><ul>
                                                                                <li><a href="../">Archives</a></li>
                                </ul></nav>
        </header><!-- /#banner -->

        <section id="content" class="body">
<article>
        <header> <h1 class="entry-title"><a href="snippets-201205.html"
        rel="bookmark" title="Permalink to Snippets of Mai 2012">Snippets of Mai 2012</a></h1>  </header>
        <div class="entry-content">
        <footer class="post-info">
        <abbr class="published" title="2012-05-30T00:00:00">
                Wed 30 May 2012
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="../author/martin-brochhaus.html">Martin Brochhaus</a>
        </address>
        <p>In <a href="../category/blog.html">Blog</a>. </p>
<p>tags: <a href="../tag/snippets.html">snippets</a></p></p></footer><!-- /.post-info --><!-- /.post-info -->
        <p>This is my third post in a series of (almost) monthly posts about small bits
and pieces of wisdom that amazed me. You can find the last post here:
<a href="http://martinbrochhaus.com/2012/04/snippets-201204.html">Snippets of April 2012</a></p>
<h1>git aliases</h1>
<h1>git defaults</h1>
<p>http://jk.gs/git-config.html</p>
<div class="highlight"><pre><span class="k">[push]</span>
<span class="na">default</span> <span class="o">=</span> <span class="s">upstream</span>
</pre></div>


<h1>factory_boy</h1>
<h1>access django from parallels</h1>
<div class="highlight"><pre>ifconfig -a
./manage.py runserver 192.168.0.10:8000
</pre></div>


<p>In Parallels, start IE and browse to http://192.168.0.10:8000</p>
<h1>Chinese translations in Django</h1>
<p>http://stackoverflow.com/questions/7728977/django-how-to-add-chinese-support-to-the-application</p>
<p>Put <code>zh-cn</code> in your settings.py but run <code>makemessages -l zh_CN</code></p>
<h1>Replacing a field on a form</h1>
<p>Let's assume:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">FooBar</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">FormBar</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FormBar</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyCustomIntegerField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">FormFooBar</span><span class="p">(</span><span class="n">FormBar</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">FooBar</span>
</pre></div>


<p>Usually we would instantiate the form <code>FormFooBar</code> which gets all it's fields
created by the model. However, in the superclass, <code>FormBar</code> we would like
to replace the automatically created field <code>bar</code> by a custom implementation
of the IntegerField which would display a different value than the one that
is actually saved on the instance.</p>
<p>The code above would still show the value from the instance. It took me quite
some time to find out that we also need to add this line after:</p>
<div class="highlight"><pre><span class="o">...</span>
<span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyCustomIntegerField</span><span class="p">()</span>
<span class="bp">self</span><span class="o">.</span><span class="n">initial</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">my_custom_calue</span>
</pre></div>


<h1>Django and Sphinx autodoc</h1>
<ul>
<li>
<p>add the following to conf.py</p>
<p>::py
sys.path.insert(0, os.path.abspath('../website/webapps/django/'))</p>
<h1>setup django</h1>
<p>import settings
from django.core.management import setup_environ
setup_environ(settings)</p>
</li>
<li>
<p>change this in Makefile</p>
<p>::sh
SPHINXBUILD   = python $(shell which sphinx-build)</p>
</li>
<li>
<p>run sphinx-apidoc -f -o api ../website/webapps/django/project</p>
</li>
</ul>
<h1>django-cms dumpdata placeholder</h1>
<ul>
<li>do not name your placeholders '01 content', better '01_content'</li>
</ul>
<h1>great content</h1>
<ul>
<li>http://www.youtube.com/watch?v=bf7BXwVeyWw
  Pretty cool explanation of the status quo in cosmology. The idea of a future
  civilisation that will no longer be able to see any other galaxy due to red
  shift is just mind blowing.</li>
</ul>
        </div><!-- /.entry-content -->
        
</article>
</section>

        <aside id="sidebar">
                <div class="widget">
                        <h2>Categories</h2>
                        <ul>
                                                   <li class="active"><a href="../category/blog.html">Blog</a></li>
                                                </ul>
                </div>
                                <div class="widget social">
                        <h2>Social</h2>
                        <ul>
                            <li><a href="../" rel="alternate">atom feed</a></li>
                            
                                                    <li><a href="https://github.com/mbrochh">Github</a></li>
                                                    <li><a href="https://plus.google.com/101162916953876296847/about">Google Plus</a></li>
                                                    <li><a href="https://twitter.com/mbrochh">Twitter</a></li>
                                                    <li><a href="https://facebook.com/mbrochh">Facebook</a></li>
                                                </ul>
                </div><!-- /.social -->
                </aside><!-- /#sidebar -->

        <footer id="footer" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://alexis.notmyidea.org/pelican/">pelican</a>, which takes great advantages of <a href="http://python.org">python</a>.
                </address><!-- /#about -->

                <p>The theme is «notmyidea-cms», a modified version of «notmyidea», the default theme.</p>
        </footer><!-- /#footer -->

</body>
</html>