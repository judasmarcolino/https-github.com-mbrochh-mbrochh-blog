<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="/theme/css/bootstrap.css" rel="stylesheet" media="screen">
    <link href="/theme/css/bootstrap-responsive.css" rel="stylesheet" media="screen">
    <link href="/theme/css/styles.css" rel="stylesheet" media="screen">

    <link href='http://fonts.googleapis.com/css?family=Bitter:400,700' rel='stylesheet' type='text/css' >
    <link href='http://fonts.googleapis.com/css?family=Cantora+One' rel='stylesheet' type='text/css'>
</head>
<body>
    <div class="miniBio">
        <div class="container">
            <a class="brand" href="./index.html" title="martinbrochhaus.com"><img src="/theme/img/avatar.jpg" /></a>
            <span class="miniBioText light">I build software with Python & Django. Every day. All day long.</span>
        </div>
    </div>

    <div class="container">
        <div class="container">
    <div class="row">
        <div class="span12 articleDetailHeadline">
            <h1>Snippets of Mai 2012</h1>
            <h2>Small Things That I've Learned This Month.</h2>
        </div>
    </div>
</div>

<div class="container">
    <div class="row articleDetail">
        <div class="span3 articleInfo light">
            <p><i class="icon-calendar"></i>&nbsp;Wed 30 May 2012</p>
    <p class="articleTags">
        <i class="icon-tag"></i>&nbsp;tags:
                    <a href="/tag/snippets.html">snippets</a>
            </p>
        </div>
        <div class="span6 articleDetailContent">
            <p>This is my third post in a series of (almost) monthly posts about small bits
and pieces of wisdom that amazed me. You can find the last post here:
<a href="http://martinbrochhaus.com/2012/04/snippets-201204.html">Snippets of April 2012</a></p>
<h1>git aliases</h1>
<h1>git defaults</h1>
<p>http://jk.gs/git-config.html</p>
<div class="highlight"><pre><span class="k">[push]</span>
<span class="na">default</span> <span class="o">=</span> <span class="s">upstream</span>
</pre></div>


<h1>factory_boy</h1>
<h1>access django from parallels</h1>
<div class="highlight"><pre>ifconfig -a
./manage.py runserver 192.168.0.10:8000
</pre></div>


<p>In Parallels, start IE and browse to http://192.168.0.10:8000</p>
<h1>Chinese translations in Django</h1>
<p>http://stackoverflow.com/questions/7728977/django-how-to-add-chinese-support-to-the-application</p>
<p>Put <code>zh-cn</code> in your settings.py but run <code>makemessages -l zh_CN</code></p>
<h1>Replacing a field on a form</h1>
<p>Let's assume:</p>
<div class="highlight"><pre><span class="k">class</span> <span class="nc">FooBar</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">FormBar</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FormBar</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyCustomIntegerField</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">FormFooBar</span><span class="p">(</span><span class="n">FormBar</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">FooBar</span>
</pre></div>


<p>Usually we would instantiate the form <code>FormFooBar</code> which gets all it's fields
created by the model. However, in the superclass, <code>FormBar</code> we would like
to replace the automatically created field <code>bar</code> by a custom implementation
of the IntegerField which would display a different value than the one that
is actually saved on the instance.</p>
<p>The code above would still show the value from the instance. It took me quite
some time to find out that we also need to add this line after:</p>
<div class="highlight"><pre><span class="o">...</span>
<span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">MyCustomIntegerField</span><span class="p">()</span>
<span class="bp">self</span><span class="o">.</span><span class="n">initial</span><span class="p">[</span><span class="s">&#39;bar&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">my_custom_calue</span>
</pre></div>


<h1>Django and Sphinx autodoc</h1>
<ul>
<li>
<p>add the following to conf.py</p>
<p>::py
sys.path.insert(0, os.path.abspath('../website/webapps/django/'))</p>
<h1>setup django</h1>
<p>import settings
from django.core.management import setup_environ
setup_environ(settings)</p>
</li>
<li>
<p>change this in Makefile</p>
<p>::sh
SPHINXBUILD   = python $(shell which sphinx-build)</p>
</li>
<li>
<p>run sphinx-apidoc -f -o api ../website/webapps/django/project</p>
</li>
</ul>
<h1>django-cms dumpdata placeholder</h1>
<ul>
<li>do not name your placeholders '01 content', better '01_content'</li>
</ul>
<h1>great content</h1>
<ul>
<li>http://www.youtube.com/watch?v=bf7BXwVeyWw
  Pretty cool explanation of the status quo in cosmology. The idea of a future
  civilisation that will no longer be able to see any other galaxy due to red
  shift is just mind blowing.</li>
</ul>
            <script type="text/javascript">
    var disqus_shortname = 'martinbrochhauscom';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
        </div>
    </div>
</div>
    </div>
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="/theme/js/bootstrap.min.js"></script>
        <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1147761-33']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>